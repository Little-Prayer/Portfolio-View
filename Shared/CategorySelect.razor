@using System.Net.Http
@inject HttpClient Http
@using Portfolio_View.Models

@if (HasCategoryList is null)
{
    <p>読み込み中</p>
}
else
{
    @foreach (var cat in HasCategoryList)
    {
        <p>@cat.category<input type="checkbox" @bind="cat.hasCategory"></p>
    }
}

@code
{
    [Parameter]
    public ICollection<Category>? Categories { get; set; }
    [Parameter]
    public EventCallback<ICollection<Category>> Callback { get; set; }

    private List<(Category category, bool hasCategory)>? HasCategoryList;

    protected override async Task OnParametersSetAsync()
    {
        var categoryList = await Http.GetFromJsonAsync<List<Category>>("category");
        HasCategoryList = categoryList?.Select(c => (c, Categories!.Contains(c))).ToList();
    }
}